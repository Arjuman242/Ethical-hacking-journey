# Linux Package Management — Notes & Examples

**Date:** 26 October 2025

> Short note (Hinglish):
> Yeh README maine aaj jo Linux package management ke baare mein seekha usko document karne ke liye banaya. Agar chahiye toh isko aur concise Hinglish version mein convert kar doon.

---

## Overview

Whether you're a system administrator, maintaining home machines, or building/maintaining a penetration testing distro, a solid understanding of Linux package managers is essential. Packages are archives that contain binaries, configuration files, dependency metadata and update tracking information. Package managers let us install, update, remove, and manage these packages reliably.

### Common features of package managers

* Package downloading
* Dependency resolution
* Standard binary package format
* Common installation & configuration locations
* System-related configuration hooks and triggers
* Quality control (maintainer, signatures, versions)

---

## Package formats & managers

Different package systems target different formats (e.g., `.deb`, `.rpm`, snaps, language-specific package formats). The package must exist in the corresponding format and is typically provided and maintained by the Linux distribution's repositories.

**Examples of package management tools:**

| Command    | Description                                                                                                   |
| ---------- | ------------------------------------------------------------------------------------------------------------- |
| `dpkg`     | Low-level tool to install/build/remove/manage Debian `.deb` packages. (Primary front-ends: `apt`, `aptitude`) |
| `apt`      | High-level APT frontend for Debian-based systems — handles dependency resolution and repository interaction.  |
| `aptitude` | Alternative high-level interface to APT.                                                                      |
| `snap`     | Install/refresh/remove snap packages — useful for distributing confined, up-to-date apps.                     |
| `gem`      | RubyGems package manager frontend for Ruby packages.                                                          |
| `pip`      | Python package installer, useful for packages not in distribution repos.                                      |
| `git`      | Not a package manager — a VCS, but often used to fetch projects and tools from sources like GitHub.           |

---

## Why package management matters

* **Dependency management:** automatically installs required libraries.
* **Security:** easy updates and security patches.
* **Consistency & reproducibility:** packages install to the correct locations and trigger config steps.
* **Efficiency:** avoids manual compilation and ad-hoc installs.

---

## Advanced Package Tool (APT) — Debian-based systems

APT is the high-level package manager that wraps `dpkg` and automates dependency resolution and repository handling.

### Repositories

Each distribution uses repositories (often `main`, `contrib`, `non-free`, or branches like `stable`, `testing`, `rolling`). You can view repository entries in files under `/etc/apt/` (for example `/etc/apt/sources.list` or `/etc/apt/sources.list.d/`).

**Example (Parrot OS repository file):**

```bash
# /etc/apt/sources.list.d/parrot.list
# parrot repository
# this file was automatically generated by parrot-mirror-selector
deb http://htb.deb.parrot.sh/parrot/ rolling main contrib non-free
#deb-src https://deb.parrot.sh/parrot/ rolling main contrib non-free
deb http://htb.deb.parrot.sh/parrot/ rolling-security main contrib non-free
#deb-src https://deb.parrot.sh/parrot/ rolling-security main contrib non-free
```

### APT cache

APT keeps a local cache/database of available packages (metadata). You can search or inspect package metadata offline using `apt-cache`.

**Search example:**

```bash
$ apt-cache search impacket
```

**Show package details:**

```bash
$ apt-cache show impacket-scripts
```

**List installed packages:**

```bash
$ apt list --installed
```

**Install package (resolves dependencies):**

```bash
$ sudo apt update
$ sudo apt install impacket-scripts -y
```

Sample apt install output shows dependency resolution, fetch progress, and package setup steps.

---

## dpkg — low-level Debian package tool

`dpkg` installs `.deb` packages directly and is useful when you have a local package file. It does **not** resolve remote dependencies automatically — you may need to use `apt` to fix broken deps.

**Install a local `.deb` file:**

```bash
$ wget http://archive.ubuntu.com/ubuntu/pool/main/s/strace/strace_4.21-1ubuntu1_amd64.deb
$ sudo dpkg -i strace_4.21-1ubuntu1_amd64.deb
```

**dpkg common commands:**

```bash
# Install a package
sudo dpkg -i package_name.deb

# Remove a package
sudo dpkg -r package_name

# List installed packages
dpkg -l

# Package status/info
dpkg -s package_name
```

If dependency problems occur after `dpkg -i`, run:

```bash
sudo apt --fix-broken install
# or
sudo apt-get -f install
```

---

## Using `git` to fetch tools (example workflow)

Often, after installing `git` via `apt`, you can clone projects from GitHub and use or package their tools.

**Example — clone Nishang:**

```bash
mkdir -p ~/nishang && git clone https://github.com/samratashok/nishang.git ~/nishang
```

Sample `git clone` output demonstrates repository download and object resolution.

---

## Practical examples from today's lab

1. **Search apt cache for packages related to Impacket:**

```bash
apt-cache search impacket
```

2. **Show details for a package:**

```bash
apt-cache show impacket-scripts
```

3. **List installed packages:**

```bash
apt list --installed
```

4. **Install a package via apt:**

```bash
sudo apt install impacket-scripts -y
```

5. **Download `.deb` and install via dpkg:**

```bash
wget http://archive.ubuntu.com/ubuntu/pool/main/s/strace/strace_4.21-1ubuntu1_amd64.deb
sudo dpkg -i strace_4.21-1ubuntu1_amd64.deb
strace -h  # test it works
```

6. **Clone a GitHub repository after installing git:**

```bash
sudo apt update && sudo apt install git -y
mkdir -p ~/nishang && git clone https://github.com/samratashok/nishang.git ~/nishang
```

---

## Optional exercise

* Search for the `evil-winrm` tool on GitHub and try installing it using different methods (git clone, packaged `.deb` if available, or via Ruby/Python installers if present).
* Experiment in a VM (or Pwnbox) to avoid affecting your host system.

---

## Summary — Key takeaways

* Package managers are crucial for dependency handling, updates, security, and system consistency.
* `dpkg` is a low-level `.deb` manager; `apt` is the higher-level frontend that resolves dependencies and interacts with repos.
* Always prefer repository-based installs (`apt`) for automatic dependency resolution; use `dpkg` for local `.deb` files and then fix dependencies with `apt` if needed.
* Use `git` to fetch projects and supplementary tools from source.

---

If you want this README in a shorter format, purely Hinglish, or with GitHub badges (e.g., `made-with: bash`), tell me and I'll update it.
